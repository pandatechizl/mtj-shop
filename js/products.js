// products.js
const products = [
  {
    id: 1,
    name: "Gold Charm Necklace",
    price: 2200,
    description: "Gold necklace with leaf charm",
    imageUrl: "assets/images/gold_chain_necklace.webp",
    category: "newArrival",
    details: {
      item: "Necklace",
      color: "Yellow Gold",
      size: "18 inches",
      weight: "15g",
      stones: "None",
      material: "18K Gold"
      }
  },
  {
    id: 2,
    name: "Minimalist Bracelet",
    price: 1400,
    description: "Simple bracelet for daily wear",
    imageUrl: "assets/images/minimalist_bracelet.webp",
    category: "newArrival",
    details: {
      item: "Bracelet",
      color: "Yellow Gold",
      size: "10 inches",
      weight: "7g",
      stones: "None",
      material: "18K Gold"
      }
  },
  {
    id: 3,
    name: "Pearl Drop Earrings",
    price: 1800,
    description: "Elegant pearl drop earrings",
    imageUrl: "assets/images/pearldropears.webp",
    category: "newArrival",
    details: {
      item: "Earring",
      color: "Yellow Gold",
      size: "0.8 inches",
      weight: "7g",
      stones: "Natural Pearl",
      material: "18K Gold"
      }
  },
  {
    id: 4,
    name: "Stackable Rings Set",
    price: 1600,
    description: "Gold-plated rings set",
    imageUrl: "assets/images/stackingring.webp",
    category: "newArrival",
    details: {
      item: "Ring",
      color: "Yellow Gold",
      size: "10",
      weight: "3g",
      stones: "None",
      material: "18K Gold"
      }
  },
  {
    id: 5,
    name: "Gold Charm Necklace",
    price: 2200,
    description: "Gold necklace with leaf charm",
    imageUrl: "assets/images/gold_chain_necklace.webp",
    category: "newArrival",
    details: {
      item: "Necklace",
      color: "Yellow Gold",
      size: "18 inches",
      weight: "15g",
      stones: "None",
      material: "18K Gold"
      }
  },
  {
    id: 6,
    name: "Minimalist Bracelet",
    price: 1400,
    description: "Simple bracelet for daily wear",
    imageUrl: "assets/images/minimalist_bracelet.webp",
    category: "newArrival",
    details: {
      item: "Bracelet",
      color: "Yellow Gold",
      size: "10 inches",
      weight: "7g",
      stones: "None",
      material: "18K Gold"
      }
  },
  {
    id: 7,
    name: "Pearl Drop Earrings",
    price: 1800,
    description: "Elegant pearl drop earrings",
    imageUrl: "assets/images/pearldropears.webp",
    category: "newArrival",
    details: {
      item: "Earring",
      color: "Yellow Gold",
      size: "0.8 inches",
      weight: "7g",
      stones: "Natural Pearl",
      material: "18K Gold"
      }
  },
  {
    id: 8,
    name: "Stackable Rings Set",
    price: 1600,
    description: "Gold-plated rings set",
    imageUrl: "assets/images/stackingring.webp",
    category: "newArrival",
    details: {
      item: "Ring",
      color: "Yellow Gold",
      size: "10",
      weight: "3g",
      stones: "None",
      material: "18K Gold"
      }
  },
  {
    id: 9,
    name: "Gold Charm Necklace",
    price: 2200,
    description: "Gold necklace with leaf charm",
    imageUrl: "assets/images/gold_chain_necklace.webp",
    category: "all",
    details: {
      item: "Necklace",
      color: "Yellow Gold",
      size: "18 inches",
      weight: "15g",
      stones: "None",
      material: "18K Gold"
      }
  },
  {
    id: 10,
    name: "Minimalist Bracelet",
    price: 1400,
    description: "Simple bracelet for daily wear",
    imageUrl: "assets/images/minimalist_bracelet.webp",
    category: "all",
    details: {
      item: "Bracelet",
      color: "Yellow Gold",
      size: "10 inches",
      weight: "7g",
      stones: "None",
      material: "18K Gold"
      }
  },
  {
    id: 11,
    name: "Pearl Drop Earrings",
    price: 1800,
    description: "Elegant pearl drop earrings",
    imageUrl: "assets/images/pearldropears.webp",
    category: "all",
    details: {
      item: "Earring",
      color: "Yellow Gold",
      size: "0.8 inches",
      weight: "7g",
      stones: "Natural Pearl",
      material: "18K Gold"
      }
  },
  {
    id: 12,
    name: "Stackable Rings Set",
    price: 1600,
    description: "Gold-plated rings set",
    imageUrl: "assets/images/stackingring.webp",
    category: "all",
    details: {
      item: "Ring",
      color: "Yellow Gold",
      size: "10",
      weight: "3g",
      stones: "None",
      material: "18K Gold"
      }
  },
  {
    id: 13,
    name: "Gold Charm Necklace",
    price: 2200,
    description: "Gold necklace with leaf charm",
    imageUrl: "assets/images/gold_chain_necklace.webp",
    category: "all",
    details: {
      item: "Necklace",
      color: "Yellow Gold",
      size: "18 inches",
      weight: "15g",
      stones: "None",
      material: "18K Gold"
      }
  },
  {
    id: 14,
    name: "Minimalist Bracelet",
    price: 1400,
    description: "Simple bracelet for daily wear",
    imageUrl: "assets/images/minimalist_bracelet.webp",
    category: "all",
    details: {
      item: "Bracelet",
      color: "Yellow Gold",
      size: "10 inches",
      weight: "7g",
      stones: "None",
      material: "18K Gold"
      }
  },
  {
    id: 15,
    name: "Pearl Drop Earrings",
    price: 1800,
    description: "Elegant pearl drop earrings",
    imageUrl: "assets/images/pearldropears.webp",
    category: "all",
    details: {
      item: "Earring",
      color: "Yellow Gold",
      size: "0.8 inches",
      weight: "7g",
      stones: "Natural Pearl",
      material: "18K Gold"
      }
  },
  {
    id: 16,
    name: "Stackable Rings Set",
    price: 1600,
    description: "Gold-plated rings set",
    imageUrl: "assets/images/stackingring.webp",
    category: "all",
    details: {
      item: "Ring",
      color: "Yellow Gold",
      size: "10",
      weight: "3g",
      stones: "None",
      material: "18K Gold"
      }
  }
];

// Main render function
//function renderProducts(filterCategory = "all") {
//  const container = document.getElementById("product-list");
//  if (!container) return;
//
//  // Filter products by category
//  const filteredProducts =
//    filterCategory === "all"
//      ? products
//      : products.filter(p => p.category === filterCategory);
//
//  // Render product cards
//  container.innerHTML = filteredProducts
//    .map(
//      p => `
//      <div class="product" onclick="viewProduct(${p.id})">
//      <img src="${p.imageUrl}" alt="${p.name}">
//        <div class="info">
//          <h3>${p.name}</h3>
//          <p>${p.description}</p>
//          <p class="price">$${p.price.toFixed(2)}</p>
//          <button onclick="event.stopPropagation(); addToCart(${p.id})">Add to Cart</button>
//        </div>
//      </div>
//    `
//    )
//    .join("");
//}

// Product view handler
function viewProduct(productId) {
  const product = products.find(p => p.id === productId);
  if (!product) return;

  localStorage.setItem("selectedProduct", JSON.stringify(product));
  window.location.href = "product.html"; // navigate to product detail page
}

// Auto-detect which page is being loaded
document.addEventListener("DOMContentLoaded", () => {
  const page = window.location.pathname;

  if (page.includes("index.html") || page.includes("new-arrivals.html")) {
    renderProducts("newArrival");
  } else if (page.includes("collections.html")) {
    renderProducts("all");
  } else {
	renderProducts("newArrival");
  }
});

// ----------------------
// Modal + Category Gallery
// ----------------------
const modal = document.getElementById("imageModal");
const modalImg = document.getElementById("modalImage");
const closeBtn = document.querySelector(".close");
const prevBtn = document.getElementById("prevBtn");
const nextBtn = document.getElementById("nextBtn");

let currentCategoryImages = [];
let currentIndex = 0;

// Open popup for selected category (Bracelet, Ring, etc.)
function openCategoryGallery(categoryItem) {
  // Filter all products where details.item matches category
  currentCategoryImages = products
    .filter(p => p.details.item.toLowerCase() === categoryItem.toLowerCase())
    .map(p => p.imageUrl);

  if (currentCategoryImages.length === 0) return;

  currentIndex = 0;
  modal.style.display = "block";
  modalImg.src = currentCategoryImages[currentIndex];
  document.body.style.overflow = "hidden"; // prevent background scroll
}

function showNextImage() {
  const img = modalImg;
  img.classList.remove("fade-in");
  img.classList.add("slide-next");

  setTimeout(() => {
    currentIndex = (currentIndex + 1) % currentCategoryImages.length;
    img.src = currentCategoryImages[currentIndex];
    img.classList.remove("slide-next");
    img.classList.add("fade-in");
  }, 300);
}

function showPrevImage() {
  const img = modalImg;
  img.classList.remove("fade-in");
  img.classList.add("slide-prev");

  setTimeout(() => {
    currentIndex = (currentIndex - 1 + currentCategoryImages.length) % currentCategoryImages.length;
    img.src = currentCategoryImages[currentIndex];
    img.classList.remove("slide-prev");
    img.classList.add("fade-in");
  }, 300);
}


// Close modal
closeBtn.onclick = () => {
  modal.style.display = "none";
  document.body.style.overflow = "auto";
};

// Click outside modal closes it
window.onclick = e => {
  if (e.target === modal) {
    modal.style.display = "none";
    document.body.style.overflow = "auto";
  }
};

// Button listeners
nextBtn.onclick = showNextImage;
prevBtn.onclick = showPrevImage;

let startX = 0;

modalImg.addEventListener("touchstart", e => {
  startX = e.touches[0].clientX;
});

modalImg.addEventListener("touchend", e => {
  let endX = e.changedTouches[0].clientX;
  let diff = startX - endX;

  if (Math.abs(diff) > 50) {
    if (diff > 0) showNextImage();   // Swipe left → next
    else showPrevImage();            // Swipe right → prev
  }
});

document.addEventListener("keydown", e => {
  if (modal.style.display === "block") {
    if (e.key === "ArrowRight") showNextImage();
    if (e.key === "ArrowLeft") showPrevImage();
    if (e.key === "Escape") modal.style.display = "none";
  }
});

